(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{543:function(n,s,t){"use strict";t.r(s);var a=t(4),e=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[n._v("#")]),n._v(" 安装docker")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("拉取镜像 "),s("code",[n._v("docker pull nginx")])])]),n._v(" "),s("li",[s("p",[n._v("创建配置文件目录 "),s("code",[n._v("mkdir -p /www/docker/nginx-study/nginx/conf")])])]),n._v(" "),s("li",[s("p",[s("strong",[n._v("拷贝配置文件")])])]),n._v(" "),s("li",[s("ul",[s("li",[n._v("docker run --name nginx01 -d nginx:latest")]),n._v(" "),s("li",[n._v("把容器中的nginx.conf文件复制到conf目录下"),s("code",[n._v("docker cp nginx01:/etc/nginx/nginx.conf /www/docker/nginx-study/nginx/conf")])])])]),n._v(" "),s("li",[s("ul",[s("li",[n._v("把容器中的default.conf文件复制到conf目录下 "),s("code",[n._v("docker cp nginx01:/etc/nginx/conf.d/``default.conf /www/docker/nginx-study/nginx/conf")])])])]),n._v(" "),s("li",[s("p",[n._v("删除镜像 "),s("code",[n._v("docker rm -f nginx01")])])]),n._v(" "),s("li",[s("p",[n._v("重新运行容器")])])]),n._v(" "),s("div",{staticClass:"language-dockerfile line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[n._v("docker run -it -d --name nginx-study -p 9999:80 \\\n\t-v /www/docker/nginx-study/nginx/html:/usr/share/nginx/html \\\n  -v /www/docker/nginx-study/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\\n  -v /www/docker/nginx-study/nginx/conf/default.conf:/etc/nginx/conf.d/default.conf \\\n  -v /www/docker/nginx-study/nginx/logs:/var/log/nginx \\\n  nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("h2",{attrs:{id:"负载均衡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡"}},[n._v("#")]),n._v(" 负载均衡")]),n._v(" "),s("div",{staticClass:"language-nginx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("http")])]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("upstream")]),n._v(" upstream_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("server")]),n._v(" 192.168.0.28:8001 weight=2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 50%的访问机会")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("server")]),n._v(" 192.168.0.28:8002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("server")]),n._v(" 192.168.0.28:8002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("server")])]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("listen")]),n._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("8080")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("server_name")]),n._v("  localhost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("location")]),n._v(" /")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("proxy_pass")]),n._v(" http://upstream_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);