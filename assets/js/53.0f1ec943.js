(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{391:function(a,e,n){"use strict";n.r(e);var v=n(4),_=Object(v.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"解决的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决的问题"}},[a._v("#")]),a._v(" 解决的问题")]),a._v(" "),e("p",[e("strong",[a._v("重复性")])]),a._v(" "),e("ul",[e("li",[a._v("多package 本地link")]),a._v(" "),e("li",[a._v("多 package 依赖安装")]),a._v(" "),e("li",[a._v("多 package 单元测试")]),a._v(" "),e("li",[a._v("多 package 代码提交")]),a._v(" "),e("li",[a._v("多 package 代码发布")])]),a._v(" "),e("p",[e("strong",[a._v("版本一致性")])]),a._v(" "),e("ul",[e("li",[a._v("发布时版本一致性")]),a._v(" "),e("li",[a._v("发布后相互依赖版本升级")])]),a._v(" "),e("h2",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),e("p",[a._v("全局或者开发依赖中安装lerna")]),a._v(" "),e("p",[a._v("npm init 初始化node项目后, 使用lerna init初始化")]),a._v(" "),e("p",[e("code",[a._v("lerna strapboot")]),a._v(": 安装所有依赖")]),a._v(" "),e("p",[e("code",[a._v("learn link")]),a._v(": 为相互应用的包添加软连接, 如: "),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/1030108.lerna/2023/01/19/21-58-40-451d823319ff516c90072044ba199219-image-20230119215838661-29d9c1.png",alt:"image-20230119215838661"}})]),a._v(" "),e("p",[e("code",[a._v("lerna exec")]),a._v(": 在每个包的跟路径下执行命令: 如"),e("code",[a._v("lerna exec -- rm -rf node_modules")])]),a._v(" "),e("p",[e("code",[a._v("lerna run")]),a._v(": 执行npm命令")]),a._v(" "),e("p",[e("strong",[a._v("发布上线")])]),a._v(" "),e("p",[e("code",[a._v("lerna version")]),a._v(": 版本升级, 需要提交并且需要有远程主分支")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/1030108.lerna/2023/01/19/22-16-04-29105d6194900ab5c16bc2293ca68011-image-20230119221602633-a45b99.png",alt:"image-20230119221602633"}})]),a._v(" "),e("p",[a._v("如果遇到升级问题: 删除项目跟路径下的package-lock.json, 再"),e("code",[a._v("lerna clear")]),a._v(" "),e("code",[a._v("lerna init")]),a._v(" "),e("code",[a._v("lerna bootstrap")]),a._v(" 提交代码, 最后在"),e("code",[a._v("lerna version")]),a._v("  , 或者需要在"),e("code",[a._v(".gitignore")]),a._v("文件下放出"),e("code",[a._v("*# packages/**/package-lock.json*")])]),a._v(" "),e("p",[e("code",[a._v("lerna changed")]),a._v(": 查看哪些包内容变更, 如图: "),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/1030108.lerna/2023/01/19/22-27-19-2304ee489948a1358af3a4a3bea46f84-image-20230119222713863-dc2937.png",alt:"image-20230119222713863"}})]),a._v(" "),e("p",[e("code",[a._v("lerna diff")]),a._v(": "),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/1030108.lerna/2023/01/19/22-28-04-f69a1e42de79949af89a6c2b26d09f71-image-20230119222802075-a58001.png",alt:"image-20230119222802075"}})])])}),[],!1,null,null,null);e.default=_.exports}}]);