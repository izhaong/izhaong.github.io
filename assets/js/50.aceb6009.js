(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{389:function(s,a,n){"use strict";n.r(a);var e=n(4),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"脚手架实现原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚手架实现原理"}},[s._v("#")]),s._v(" 脚手架实现原理")]),s._v(" "),a("h5",{attrs:{id:"为什么全局安装-vue-cli后会添加vue的命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么全局安装-vue-cli后会添加vue的命令"}},[s._v("#")]),s._v(" 为什么全局安装@vue/cli后会添加vue的命令？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -g @vue/cli\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看vue实际文件路径")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> which vue\n/usr/local/bin/vue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("bin目录下存放的是可执行文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> cd /usr/local/bin\n> ll\nlrwxr-xr-x  1 song  admin    39B 12 28 21:48 vue -> ../lib/node_modules/@vue/cli/bin/vue.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以看到vue实际是一个软链接，指向：../lib/node_modules/@vue/cli/bin/vue.js")]),s._v(" "),a("h5",{attrs:{id:"绑定管理在哪里指定的呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#绑定管理在哪里指定的呢"}},[s._v("#")]),s._v(" 绑定管理在哪里指定的呢？")]),s._v(" "),a("p",[s._v("进入到@vue/cli安装目录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> cd /usr/local/lib/node_modules/@vue/cli\n> ll\n-rw-r--r--    1 song  admin   2.5K 12 28 21:48 package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("在package.json中有一个bin的配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' "bin": {\n    "vue": "bin/vue.js"\n  },\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这里配置了安装完之后的软链接名称，以及指向的实际文件")]),s._v(" "),a("h5",{attrs:{id:"全局安装-vue-cli时发生了什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-vue-cli时发生了什么"}},[s._v("#")]),s._v(" 全局安装@vue/cli时发生了什么？")]),s._v(" "),a("p",[s._v("npm install -g @vue/cli")]),s._v(" "),a("ul",[a("li",[s._v("第一步：会把@vue/cli下载到node node_modules中")]),s._v(" "),a("li",[s._v("第二步：下载成功后会解析package.json 中的 bin 配置，有这个配置就会创建一个软链接")])]),s._v(" "),a("h5",{attrs:{id:"vue执行一个js文件-为什么可以执行它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue执行一个js文件-为什么可以执行它"}},[s._v("#")]),s._v(" vue执行一个js文件，为什么可以执行它？")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("执行vue命令时，系统会执行which vue在环境变量中找vue的注册并执行文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 这两条命令执行是等价的\n> vue\n>/usr/local/bin/vue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行的真实文件是vue对应的软链接：../lib/node_modules/@vue/cli/bin/vue.js")]),s._v(" "),a("p",[s._v("直接执行一个xx.js执行不了的，vue.js又是怎么执行的呢？")]),s._v(" "),a("p",[s._v("js文件需要一个解释器(node)来执行 vue.js源码第一行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("自己创建一个js文件,test.js中第一行加入此代码，通过 ./test.js也能直接执行。")]),s._v(" "),a("p",[s._v("为什么能直接执行？")]),s._v(" "),a("p",[s._v("这句话的意思是，告诉系统在环境变量中去找node命令，来执行此文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> /usr/bin/env node # 会将node命令执行起来，与直接执行node是一样的效果\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("所以./test.js等于 /usr/bin/env node test.js 等于 node test.js")]),s._v(" "),a("p",[s._v("chmod 777 test.js 设置文件为可执行文件")]),s._v(" "),a("h5",{attrs:{id:"自定义一条命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义一条命令"}},[s._v("#")]),s._v(" 自定义一条命令")]),s._v(" "),a("p",[s._v("思路：在环境变量中创建一个软链接，执行 test.js即可 (软链接可以嵌套) 在 /usr/local/bin下执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(">  ln -s <路径>/test/index.js <name> #删除软链接 rm <name>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h1",{attrs:{id:"脚手架的开发流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚手架的开发流程"}},[s._v("#")]),s._v(" 脚手架的开发流程")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("创建npm项目")])]),s._v(" "),a("li",[a("p",[s._v("创建脚手架入口文件，最上方添加：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("配置package.json 添加bin属性")])]),s._v(" "),a("li",[a("p",[s._v("编写脚手架代码")])]),s._v(" "),a("li",[a("p",[s._v("将脚手架发布到npm")])])]),s._v(" "),a("h3",{attrs:{id:"脚手架开发难点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚手架开发难点"}},[s._v("#")]),s._v(" 脚手架开发难点")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("分包： 将复杂系统拆分成若干个模块")])]),s._v(" "),a("li",[a("p",[s._v("命令注册：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vue create\nvue add \nvue invoke\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("参数解析")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vue command [options] <params>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("options全称：--version、--help options简写： -V、-h")])]),s._v(" "),a("li",[a("p",[s._v("帮助文档")])]),s._v(" "),a("li",[a("p",[s._v("命令行交互")])]),s._v(" "),a("li",[a("p",[s._v("日志打印")])]),s._v(" "),a("li",[a("p",[s._v("命令行文字变色")])]),s._v(" "),a("li",[a("p",[s._v("网络通信：HTTP/WebSocket")])]),s._v(" "),a("li",[a("p",[s._v("文件处理 ....")])])]),s._v(" "),a("p",[a("strong",[s._v("理解npm link")])]),s._v(" "),a("ul",[a("li",[a("em",[s._v("npm link your-lib")]),s._v("：将当前项目中 "),a("em",[s._v("node_modules")]),s._v(" 下指定的库文件链接到 "),a("em",[s._v("node")]),s._v("全局"),a("em",[s._v("node_modules")]),s._v("下的库文件")]),s._v(" "),a("li",[a("em",[s._v("npm link")]),s._v(": 将当前项目链接到"),a("em",[s._v("node")]),s._v("全局"),a("em",[s._v("node_modules")]),s._v("中作为一个库文件，并解析"),a("em",[s._v("bin")]),s._v("配置创建可执行文件")])]),s._v(" "),a("p",[a("strong",[s._v("理解npm unlink")])]),s._v(" "),a("ul",[a("li",[a("em",[s._v("npm unlink")]),s._v("：将当前项目从"),a("em",[s._v("node")]),s._v("全局"),a("em",[s._v("node_modules")]),s._v("中移除")]),s._v(" "),a("li",[a("em",[s._v("npm unlink your-li")]),s._v("：将当前项目中的库文件依赖移除")])]),s._v(" "),a("h3",{attrs:{id:"创建一个脚手架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个脚手架"}},[s._v("#")]),s._v(" 创建一个脚手架")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> mkdir cli-test # 创建一个文件夹\n> npm init -y # 初始化\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("cli-test 目录: -- package.json -- bin")]),s._v(" "),a("ul",[a("li",[s._v("|-- inde.js")])]),s._v(" "),a("p",[s._v("index.js 文件:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\nconsole.log('Hello cli')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("package.json文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  ...\n  "main": "index.js",\n  "bin":  {\n        "cli-test": "bin/index.js"\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("将脚手架发布到npm")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> npm login # 登录npm\n> npm publish # 发布\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在cli-test目录下，进行全局安装 "),a("em",[s._v("npm install -g cli-test")]),s._v(" 就会建立一个软链接，方便进行本地调试， 通过"),a("em",[s._v("npm link")]),s._v(" 也可。")]),s._v(" "),a("h1",{attrs:{id:"yargs入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yargs入门"}},[s._v("#")]),s._v(" yargs入门")]),s._v(" "),a("p",[s._v("Yargs通过解析参数来帮助您构建脚手架的工具。")]),s._v(" "),a("h3",{attrs:{id:"通过yargs创建一个最简单的脚手架工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过yargs创建一个最简单的脚手架工具"}},[s._v("#")]),s._v(" 通过yargs创建一个最简单的脚手架工具")]),s._v(" "),a("p",[s._v("定义文件"),a("em",[s._v("index.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\n\nconst yargs = require('yargs/yargs')\nconst { hideBin } = require('yargs/helpers')\n\nconst arg = hideBin(process.argv)\nyargs(arg)\n     .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js --help\n选项：\n  --help     显示帮助信息                                                 [布尔]\n  --version  显示版本号                                                   [布尔]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"严格模式-strict"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#严格模式-strict"}},[s._v("#")]),s._v(" 严格模式: "),a("em",[s._v("strict")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yargs(arg)\n    .strict()\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("加入strict，如果有无法识别的参数，将会给出提示")]),s._v(" "),a("h3",{attrs:{id:"用法提示-usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法提示-usage"}},[s._v("#")]),s._v(" 用法提示: "),a("em",[s._v("usage")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yargs(arg)\n    .usage('Usage: test [command] <options>')\n    .strict()\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("使用--help将会打印出使用信息")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js --help\ntest [command] <options>\n\n选项：\n  --help     显示帮助信息                                                 [布尔]\n  --version  显示版本号\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"最少输入的command个数-demandcommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最少输入的command个数-demandcommand"}},[s._v("#")]),s._v(" 最少输入的command个数: "),a("em",[s._v("demandCommand")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yargs(arg)\n    .usage('Usage: test [command] <options>')\n    .demandCommand(1, '最少输入一个参数')\n    .strict()\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"设置command别名-alias"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置command别名-alias"}},[s._v("#")]),s._v(" 设置command别名: "),a("em",[s._v("alias")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yargs(arg)\n    .usage('Usage: test [command] <options>')\n    .demandCommand(1, '最少输入一个参数')\n    .strict()\n    .alias('h', 'help') //-h 和  --help 效果一样\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"设置输出内容的宽度-wrap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置输出内容的宽度-wrap"}},[s._v("#")]),s._v(" 设置输出内容的宽度: "),a("em",[s._v("wrap")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const cli = yargs(arg)\ncli.usage('Usage: test [command] <options>')\n    .demandCommand(1, '最少输入一个参数')\n    .strict()\n    .alias('h', 'help')\n    .wrap(cli.terminalWidth()) // terminalWidth返回当前窗口的宽度\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"设置结尾显示的内容-epilogue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置结尾显示的内容-epilogue"}},[s._v("#")]),s._v(" 设置结尾显示的内容: "),a("em",[s._v("epilogue")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cli.usage('Usage: test [command] <options>')\n    .demandCommand(1, '最少输入一个参数')\n    .strict()\n    .alias('h', 'help')\n    .wrap(cli.terminalWidth())\n    .epilogue('结尾显示的话')\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"为全局command添加选项-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为全局command添加选项-options"}},[s._v("#")]),s._v(" 为全局command添加选项: "),a("em",[s._v("options")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cli.usage('Usage: test [command] <options>')\n    .alias('h', 'help')\n    .options({\n        debug: { // 添加的选项名\n            type: 'boolean',\n            describe: 'debug mode',\n            alias: 'd'  // 别名\n        }\n    })\n    .argv\n// options('name', {}) 一个一个设置的用法\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("执行效果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js -h\nUsage: test [command] <options>\n\n选项：\n      --version  显示版本号                                               [布尔]\n  -d, --debug    debug mode                                              [布尔]\n  -h, --help     显示帮助信息                                             [布尔]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"将选项分组-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将选项分组-group"}},[s._v("#")]),s._v(" 将选项分组: "),a("em",[s._v("group")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cli.usage('Usage: test [command] <options>')\n    .alias('h', 'help')\n    .options({\n        debug: {\n            type: 'boolean',\n            describe: 'debug mode',\n            alias: 'd'\n        }\n    })\n    .group(['debug'], 'Dev Options:')\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("执行效果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js -h\nUsage: test [command] <options>\n\nDev Options:\n  -d, --debug  debug mode                                                [布尔]\n\n选项：\n      --version  显示版本号                                               [布尔]\n  -h, --help     显示帮助信息                                             [布尔]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"命令纠错提示-recommendcommands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令纠错提示-recommendcommands"}},[s._v("#")]),s._v(" 命令纠错提示："),a("em",[s._v("recommendCommands()")])]),s._v(" "),a("p",[s._v("会根据当前输入的command去找最相似的进行提示")]),s._v(" "),a("h3",{attrs:{id:"自定义错误信息-fail-err-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义错误信息-fail-err-msg"}},[s._v("#")]),s._v(" 自定义错误信息: "),a("em",[s._v("fail((err,msg) => {...})")])]),s._v(" "),a("h2",{attrs:{id:"dedent库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dedent库"}},[s._v("#")]),s._v(" dedent库")]),s._v(" "),a("p",[s._v("去除每行顶部空格，方便多行字符串的输出")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const dedent = require('dedent')\nconsole.log(dedent`\n    第一行，\n    第二行\n`)\n// 将会订购显示输出\n/**\n第一行，\n第二行\n*/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h1",{attrs:{id:"自定义命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义命令"}},[s._v("#")]),s._v(" 自定义命令")]),s._v(" "),a("p",[s._v("官方示例")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\nconst yargs = require('yargs/yargs')\nconst { hideBin } = require('yargs/helpers')\n\nyargs(hideBin(process.argv))\n    .command(\n        'serve [port]', // serve 脚手架后面输入的名，[port]定义的option\n        'start the server', // 描述\n        (yargs) => { //builder，在执行这个command之前做的事情\n            yargs\n                .positional('port', {\n                    describe: 'port to bind on',\n                    default: 5000\n                })\n        }, \n        (argv) => { // handler，执行comand 的行为\n            if (argv.verbose) console.info(`start server on :${argv.port}`)\n            serve(argv.port)\n        }\n    )\n    .option('verbose', {\n        alias: 'v',\n        type: 'boolean',\n        description: 'Run with verbose logging'\n    })\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("自定义")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cli.usage('Usage: test [command] <options>')\n    .alias('h', 'help')\n    .options({\n        debug: {\n            type: 'boolean',\n            describe: 'debug mode',\n            alias: 'd'\n        }\n    })\n    .group(['debug'], 'Dev Options:')\n    .command('init [name]', '初始化的命令', (yargs) => {\n        yargs.option('name', {\n            type: 'string',\n            describe: 'init的option',\n            alias: 'n'\n        })\n    }, (argv) => {\n        console.log(argv)\n    })\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("执行效果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js init  \n{ _: [ 'init' ], '$0': 'index.js' }\n\n> ./index.js init -h \nndex.js init [name]\n\n初始化的命令\n\nDev Options:\n  -d, --debug  debug mode                                                 [布尔]\n\n选项：\n      --version  显示版本号                                               [布尔]\n  -n, --name     init的option                                           [字符串]\n  -h, --help     显示帮助信息                                             [布尔]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("使用对象方式定义")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    ...\n    .command({\n        command: 'list',\n        aliases: ['ls', 'la', 'll'],\n        describe: 'list 的描述',\n        builder: (yargs) => {\n\n        },\n        handler: (argv) => {\n            console.log(argv)\n        }\n    })\n    .argv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h5",{attrs:{id:"parse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parse"}},[s._v("#")]),s._v(" parse")]),s._v(" "),a("p",[s._v("解析命令参数，合并传入的参数，合并完作为一个新的参数注入到脚手架中")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env node\n\nconst yargs = require('yargs/yargs')\nconst pkg = require('../package.json')\n\nconst argv = process.argv.splice(2)\nconst context = {\n    testVersion: pkg.version\n}\n\nyargs()\n    .command({\n        command: 'list',\n        aliases: ['ls', 'la', 'll'],\n        describe: 'list 的描述',\n        builder: (yargs) => {},\n        handler: (argv) => {\n            console.log(argv)\n        }\n    })\n    .parse(argv, context)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("执行效果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> ./index.js list\n{ _: [ 'list' ], testVersion: '1.0.5', '$0': 'index.js' }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h1",{attrs:{id:"lerna初始化过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna初始化过程"}},[s._v("#")]),s._v(" Lerna初始化过程")]),s._v(" "),a("p",[a("img",{attrs:{src:"/Users/izhaong/izhaong/Project_me/Blog/izhaong.com-localFile/1030101.node%E5%85%A8%E5%B1%80%E8%84%9A%E6%9C%AC%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/1240.jpeg",alt:"img"}})]),s._v(" "),a("h6",{attrs:{id:"npm本地包引用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm本地包引用方法"}},[s._v("#")]),s._v(" npm本地包引用方法")]),s._v(" "),a("p",[s._v("除了npm link 还可以通过"),a("em",[s._v("file:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@lerna/global-options:"file:../global-options"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"lerna创建发布流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna创建发布流程"}},[s._v("#")]),s._v(" Lerna创建发布流程")]),s._v(" "),a("h3",{attrs:{id:"项目初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目初始化"}},[s._v("#")]),s._v(" 项目初始化")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> mkdir my-cli-dev # 创建项目文件\n> npm init -y # 在项目目录下初始化\n> npm i -g lerna # 全局安装lerna\n> lerna init # 初始化\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"创建package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建package"}},[s._v("#")]),s._v(" 创建package")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> lerna create core # package name 为 @my-cli-dev/core\n> lerna create utils # package name 为 @my-cli-dev/utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("package.json中name为@my-cli-dev/core这种方式，my-cli-dev则为组织名称，需要在npm上创建一个对应的组织，可以避免名字的重复。若包发布不上去检查下这个组织是否已经建立。 core/package.json 中dependencies 添加@my-cli-dev/utils的依赖。 通过"),a("em",[s._v("lerna link")]),s._v("链接到本地库")]),s._v(" "),a("h3",{attrs:{id:"发布前的准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布前的准备"}},[s._v("#")]),s._v(" 发布前的准备")]),s._v(" "),a("p",[a("strong",[s._v("1、创建git仓库")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> git remote add origin https://xx/cli.git # 添加仓库的链接\n# 代码提交到仓库\n> git add .\n> git commit -m 'init' \n> git push origin master --set-upstream\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("2、需要npm login")]),s._v(" "),a("strong",[s._v("3、根目录下添加LICENSE.md文件")]),s._v(" "),a("strong",[s._v("4、package.json中添加publishConfig设置为公有库")])]),s._v(" "),a("h3",{attrs:{id:"发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布"}},[s._v("#")]),s._v(" 发布")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> lerna publish\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("错误问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lerna ERR! E403 [no_perms] Private mode enable, only admin can publish this module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("出现原因：使用的是淘宝源cnpm,登陆到的是cnpm 解决方法：切换到npmjs的网址，代码如下 npm config set registry http://registry.npmjs.org/ 切换过去之后记得npm login")])])}),[],!1,null,null,null);a.default=t.exports}}]);