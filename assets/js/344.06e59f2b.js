(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{683:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("利用青龙面板来自动执行"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E4%BA%AC%E4%B8%9C%E9%A2%86%E4%BA%AC%E8%B1%86",target:"_blank",rel:"noopener noreferrer"}},[s._v("京东领京豆"),a("OutboundLink")],1),s._v("，做"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E4%B8%9C%E4%B8%9C%E5%86%9C%E5%9C%BA",target:"_blank",rel:"noopener noreferrer"}},[s._v("东东农场"),a("OutboundLink")],1),s._v("任务签到浇水"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E5%85%8D%E8%B4%B9%E9%A2%86%E6%B0%B4%E6%9E%9C",target:"_blank",rel:"noopener noreferrer"}},[s._v("免费领水果"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E4%BA%AC%E5%96%9C%E7%89%A7%E5%9C%BA",target:"_blank",rel:"noopener noreferrer"}},[s._v("京喜牧场"),a("OutboundLink")],1),s._v("养小鸡收集鸡蛋，"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E4%BA%AC%E4%B8%9C%E6%9E%81%E9%80%9F%E7%89%88%E9%87%91%E5%B8%81",target:"_blank",rel:"noopener noreferrer"}},[s._v("京东极速版金币"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"https://www.dujin.org/tag/%E4%BA%AC%E4%B8%9C%E8%B5%9A%E8%B5%9A%E9%A2%86%E9%87%91%E5%B8%81",target:"_blank",rel:"noopener noreferrer"}},[s._v("京东赚赚领金币"),a("OutboundLink")],1),s._v("，东东萌宠喂养。同时还能自动领取京东红包、京喜红包、京东极速版红包……")]),s._v(" "),a("h3",{attrs:{id:"镜像下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像下载"}},[s._v("#")]),s._v(" 镜像下载")]),s._v(" "),a("p",[s._v("我们最终下载"),a("code",[s._v("docker-compose.yml")]),s._v("即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" qinglong\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://raw.githubusercontent.com/whyour/qinglong/master/docker/docker-compose.yml\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("以本地docker为例：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/21-41-56-9447942eb85eabd6f8b513646f8a9fae-image-20220829214154125-0f719c.png",alt:"image-20220829214154125"}})]),s._v(" "),a("p",[s._v("到"),a("code",[s._v("hub.docker.com")]),s._v(" docker 官网搜索容器 "),a("code",[s._v("qinglong")]),s._v(", 搜索结果基本第一个就是，主要看更新时间和下载量")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[s._v('\nversion: \'2\'\nservices:\n  web:\n    container_name: "qinglong"  // 容器名字固定\n    image: whyour/qinglong:latest\n    volumes:\n      - ./data:/ql/data\n    ports:\n      - "0.0.0.0:5700:5700"\n    restart: unless-stopped\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"安装部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装部署"}},[s._v("#")]),s._v(" 安装部署")]),s._v(" "),a("div",{staticClass:"language-docker line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\ndocker-compose up -d\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\ndocker-compose down\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/21-44-59-a17f7bea2f0d451d0ab49198bd7d82fa-image-20220829214455321-e178f7.png",alt:"image-20220829214455321"}})]),s._v(" "),a("h2",{attrs:{id:"开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发"}},[s._v("#")]),s._v(" 开发")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:whyour/qinglong.git\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" qinglong\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" .env.example .env\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("打开你的浏览器，访问 "),a("a",{attrs:{href:"http://127.0.0.1:5700/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://127.0.0.1:5700"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"添加脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加脚本"}},[s._v("#")]),s._v(" 添加脚本")]),s._v(" "),a("p",[s._v("需要在容器内执行相关命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/22-26-54-c5f485ed64f761f26c3c3678351e6b7c-image-20220829222650468-74dca1.png",alt:"image-20220829222650468"}})]),s._v(" "),a("ol",[a("li",[s._v("内置命令")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新并重启青龙")]),s._v("\nql update                                                    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行自定义脚本extra.sh")]),s._v("\nql extra                                                     \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加单个脚本文件")]),s._v("\nql raw "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                             \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加单个仓库的指定脚本")]),s._v("\nql repo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("repo_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("whitelist"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("blacklist"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dependence"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("branch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除旧日志")]),s._v("\nql rmlog "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("days"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                              \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动tg-bot")]),s._v("\nql bot                                                       \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检测青龙环境并修复")]),s._v("\nql check                                                     \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置登录错误次数")]),s._v("\nql resetlet                                                  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用两步登录")]),s._v("\nql resettfa                                                  \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 依次执行，如果设置了随机延迟，将随机延迟一定秒数")]),s._v("\ntask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                             \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 依次执行，无论是否设置了随机延迟，均立即运行，前台会输出日，同时记录在日志文件中")]),s._v("\ntask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" now                                         \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并发执行，无论是否设置了随机延迟，均立即运行，前台不产生日，直接记录在日志文件中，且可指定账号执行")]),s._v("\ntask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" conc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("env_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("account_number"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("可选的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定账号执行，无论是否设置了随机延迟，均立即运行 ")]),s._v("\ntask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" desi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("env_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("account_number"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("         \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("ol",[a("li",[s._v("参数说明")])]),s._v(" "),a("ul",[a("li",[s._v("file_url: 脚本地址")]),s._v(" "),a("li",[s._v("repo_url: 仓库地址")]),s._v(" "),a("li",[s._v("whitelist: 拉取仓库时的白名单，即就是需要拉取的脚本的路径包含的字符串")]),s._v(" "),a("li",[s._v("blacklist: 拉取仓库时的黑名单，即就是需要拉取的脚本的路径不包含的字符串")]),s._v(" "),a("li",[s._v("dependence: 拉取仓库需要的依赖文件，会直接从仓库拷贝到scripts下的仓库目录，不受黑名单影响")]),s._v(" "),a("li",[s._v("branch: 拉取仓库的分支")]),s._v(" "),a("li",[s._v("days: 需要保留的日志的天数")]),s._v(" "),a("li",[s._v("file_path: 任务执行时的文件路径")]),s._v(" "),a("li",[s._v("env_name: 任务执行时需要并发或者指定时的环境变量名称")]),s._v(" "),a("li",[s._v("account_number: 任务执行时指定某个环境变量需要执行的账号序号")])]),s._v(" "),a("h3",{attrs:{id:"脚本仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本仓库"}},[s._v("#")]),s._v(" 脚本仓库")]),s._v(" "),a("p",[s._v("https://github.com/FlechazoPh/QLDependency  批量添加脚本的命令库")]),s._v(" "),a("p",[s._v("https://github.com/ccwav/QLScript2")]),s._v(" "),a("ul",[a("li",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/23-14-28-e719dafa578c1fb25d322e8f1cbcdda8-image-20220829231427069-bc6508.png",alt:"image-20220829231427069"}})])]),s._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),a("h3",{attrs:{id:"容器外一键安装脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器外一键安装脚本"}},[s._v("#")]),s._v(" 容器外一键安装脚本")]),s._v(" "),a("p",[s._v("输入一键安装命令，如果你的青龙容器不叫 qinglong，需要替换为相应的容器名字（国外鸡，可以使用上面的国外脚本，速度比较快）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('docker exec -it qinglong bash -c "$(curl -fsSL https://ghproxy.com/https://raw.githubusercontent.com/FlechazoPh/QLDependency/main/Shell/QLOneKeyDependency.sh | sh)"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"容器内安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器内安装"}},[s._v("#")]),s._v(" 容器内安装")]),s._v(" "),a("div",{staticClass:"language-shellshe l line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('ql repo https://github.com/ccwav/QLScript2.git "jd_" "NoUsed" "ql|sendNotify|utils|USER_AGENTS|jdCookie|JS_USER_AGENTS"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/22-32-13-b19bc993768efe1fcc863719868cc97f-image-20220829223208407-65f50f.png",alt:"image-20220829223208407"}})]),s._v(" "),a("ul",[a("li",[s._v("最后输出，就完成了，重启下青龙 Docker ：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker restart qinglong\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("配置cookie 账户， 在脚本管理中的某个js文件，如上图")]),s._v(" "),a("li",[s._v("cookie获取很简单，在手机端登录后就能拿到")]),s._v(" "),a("li",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/23-19-40-47124d3f110c654835add0f4f9c35a7a-image-20220829231937842-54d6e4.png",alt:"image-20220829231937842"}})])]),s._v(" "),a("h3",{attrs:{id:"成果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#成果"}},[s._v("#")]),s._v(" 成果")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/izhaong/izhaong.com-oss/blogImg/4080010.%E4%BA%AC%E4%B8%9C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E6%B5%87%E6%B0%B4%E9%A2%86%E8%B1%86/2022/08/29/23-11-45-85eb5bd96670e8f54ffbde537d1b8e2a-image-20220829231139351-48c02a.png",alt:"image-20220829231139351"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);